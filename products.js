const hamburgerBtn = document.querySelector('.hamburger-btn');
const mobileMenu = document.getElementById('mobileMenu');
const closeMobileMenuBtn = document.getElementById('closeMobileMenu');

function openMobileMenu() {
  mobileMenu.classList.add('active');
  hamburgerBtn.setAttribute('aria-expanded', 'true');
  mobileMenu.setAttribute('aria-hidden', 'false');
}

function closeMobileMenu() {
  mobileMenu.classList.remove('active');
  hamburgerBtn.setAttribute('aria-expanded', 'false');
  mobileMenu.setAttribute('aria-hidden', 'true');
}

// Event listeners
hamburgerBtn.addEventListener('click', openMobileMenu);
closeMobileMenuBtn.addEventListener('click', closeMobileMenu);

// Optional: close menu when clicking outside menu on mobile (not required, but user friendly)
document.addEventListener('click', (e) => {
  if (
    mobileMenu.classList.contains('active') &&
    !mobileMenu.contains(e.target) &&
    !hamburgerBtn.contains(e.target)
  ) {
    closeMobileMenu();
  }
});



// Elements
const modeToggle = document.getElementById('modeToggle');
const mobileModeToggle = document.getElementById('mobileModeToggle');

// Apply saved theme on load
document.addEventListener('DOMContentLoaded', () => {
  const savedTheme = localStorage.getItem('theme');
  if (savedTheme === 'dark') {
    document.body.classList.add('dark-mode');
  }
});



// Function to toggle dark mode
function toggleDarkMode() {
  document.body.classList.toggle('dark-mode');
  if (document.body.classList.contains('dark-mode')) {
    localStorage.setItem('theme', 'dark');
    modeToggle.textContent = '‚òÄÔ∏è'; // change icon to sun
    if (mobileModeToggle) mobileModeToggle.textContent = '‚òÄÔ∏è Light Mode';
  } else {
    localStorage.setItem('theme', 'light');
    modeToggle.textContent = 'üåì'; // moon icon
    if (mobileModeToggle) mobileModeToggle.textContent = 'üåì Dark Mode';
  }
}

// Event listeners
if (modeToggle) modeToggle.addEventListener('click', toggleDarkMode);
if (mobileModeToggle) mobileModeToggle.addEventListener('click', toggleDarkMode);













function shuffleVisibleProducts(grid) {
  const visibleCards = Array.from(grid.children).filter(card => card.style.display !== 'none');
  visibleCards.sort(() => Math.random() - 0.5);
  visibleCards.forEach(card => grid.appendChild(card));
}

function filterProducts() {
  const sizeValue = document.getElementById('filter-size').value.toLowerCase();
  const typeValue = document.getElementById('filter-type').value.toLowerCase();
  const grid = document.querySelector('.product-grid');
  const cards = grid.querySelectorAll('.product-card');

  cards.forEach(card => {
    const cardSize = card.dataset.size?.toLowerCase();
    const cardType = card.dataset.type?.toLowerCase();

    const matchesSize = !sizeValue || cardSize === sizeValue;
    const matchesType = !typeValue || cardType === typeValue;

    card.style.display = (matchesSize && matchesType) ? 'block' : 'none';
  });

  shuffleVisibleProducts(grid);
}

// Shuffle on first load
window.addEventListener('DOMContentLoaded', () => {
  const grid = document.querySelector('.product-grid');
  shuffleVisibleProducts(grid);
});












function getGreeting() {
  const hour = new Date().getHours();
  if (hour < 12) return "Good morning";
  if (hour < 18) return "Good afternoon";
  return "Good evening";
}

function getRandomMessage(productName, qty) {
  const messages = [
    `I'm interested in buying ${qty} pcs of ${productName}.`,
    `Please send me your best price for ${qty} pcs of ${productName}.`,
    `I need ${qty} units of ${productName}. Kindly reply soon.`,
    `Looking to purchase ${qty} pcs of ${productName}.`,
    `Can you confirm availability and pricing for ${qty} of ${productName}?`
  ];
  return messages[Math.floor(Math.random() * messages.length)];
}

async function fetchCountry() {
  try {
    const res = await fetch("https://ipapi.co/json/");
    const data = await res.json();
    return data.country_name || "your country";
  } catch {
    return "your country";
  }
}

async function sendWhatsApp(button) {
  const card = button.closest('.product-card');
  const name = card.querySelector('h3').innerText;
  const qty = card.querySelector('.qty-input').value || 1;
  const greeting = getGreeting();
  const country = await fetchCountry();
  const msg = getRandomMessage(name, qty);

  const finalMessage = `${greeting} üëã

${msg}

üåç I'm messaging you from ${country}.

‚úçÔ∏è My Name: 
üè¢ Company Name: 
üìû Phone: 
üìß Email: 

Our CHENHUA AUTO team will reply as soon as possible.`;

  const phone = "8618054365167"; // Replace with your WhatsApp number
  const url = `https://wa.me/${phone}?text=${encodeURIComponent(finalMessage)}`;
  window.open(url, '_blank');
}

async function sendEmail(button) {
  const card = button.closest('.product-card');
  const name = card.querySelector('h3').innerText;
  const qty = card.querySelector('.qty-input').value || 1;
  const greeting = getGreeting();
  const country = await fetchCountry();
  const msg = getRandomMessage(name, qty);

  const fullBody = `${greeting},

${msg}

üåç I am contacting you from ${country}.

‚úçÔ∏è My Name: 
üè¢ Company Name: 
üìû Phone: 
üìß Email: 

Looking forward to your reply.

CHENHUA AUTO`;

  const subject = `Inquiry: ${name}`;
  const email = "18054365167@163.com"; // Replace with your real email

  const gmailURL = `https://mail.google.com/mail/?view=cm&fs=1&to=${encodeURIComponent(email)}&su=${encodeURIComponent(subject)}&body=${encodeURIComponent(fullBody)}`;
  window.open(gmailURL, '_blank');
}











document.addEventListener("DOMContentLoaded", () => {
  const images = document.querySelectorAll('.product-img img');

  images.forEach(img => {
    img.addEventListener('load', () => {
      img.classList.add('loaded');
    });

    // Optional fallback if cached
    if (img.complete) {
      img.classList.add('loaded');
    }
  });
});













const translations = {
  en: {
    home: "Home",
    products: "Products",
    about: "About",
    contact: "Contact",
    main_intro: "Our Tractor Rims",
    sub_intro: "Strong. Durable. Built for farms everywhere.",
    // ‚úÖ Filter section translations
    filter_by_size: "Filter by Size:",
    all_sizes: "All Sizes",
    filter_by_type: "Filter by Type:",
    all_types: "All Types",
    disc: "Disc",
    split: "Split",
    solid: "Solid",
    action_1: "Want to do business with CHENHUA AUTO ?",
    action_2: "We‚Äôre ready to provide you with the best rims and support for your needs. Let‚Äôs grow together.",
    contact_sales: "Contact Our Sales Team",

    testimonials: "What our customer say",
    testimonial_1_text: "From product durability to customer service, the experience was outstanding. We were impressed with the speed and the communication!",
    testimonial_2_text: "Kari and the team helped us get exactly what we needed. The rims are solid and delivery was on point.",
    testimonial_3_text: "Professional support, quality rims, and fast responses. Will surely continue working with CHENHUA AUTO.",
    testimonial_4_text: "Every order is delivered with care and precision. Their support team is always available, and that builds trust.",

    quick_links: "Quick Links",
    about_us: "About Us",
    contact: "Contact",
    follow_us: "Follow Us",
    privacy_policy: "Privacy Policy",
    terms_of_service: "Terms of Service",
    contact_us: "Contact CHENHUA AUTO",
    full_name: "Full Name",
    company_name: "Company Name",
    phone_number: "Phone Number",
    whatsapp: "WhatsApp",
    wechat: "WeChat",
    contact_email: "Email",
    toggle_theme: "Toggle Theme"
  },
  fr: {
    home: "Accueil",
    products: "Produits",
    about: "√Ä propos",
    contact: "Contact",
    main_intro: "Nos Jantes de Tracteur",
    sub_intro: "Solides. Durables. Con√ßues pour les fermes partout.",

    // ‚úÖ Filter section translations
    filter_by_size: "Filtrer par taille :",
    all_sizes: "Toutes les tailles",
    filter_by_type: "Filtrer par type :",
    all_types: "Tous les types",
    disc: "Disque",
    split: "Partag√©",
    solid: "Solide",

    action_1: "Vous voulez faire des affaires avec CHENHUA AUTO ?",
    action_2: "Nous sommes pr√™ts √† vous fournir les meilleures jantes et le soutien dont vous avez besoin. Grandissons ensemble.",
    contact_sales: "Contactez notre √©quipe commerciale",

    testimonials: "Ce que disent nos clients",
    testimonial_1_text: "De la durabilit√© du produit au service client, l'exp√©rience a √©t√© exceptionnelle. Nous avons √©t√© impressionn√©s par la rapidit√© et la communication !",
    testimonial_2_text: "Kari et l'√©quipe nous ont aid√©s √† obtenir exactement ce dont nous avions besoin. Les jantes sont solides et la livraison √©tait parfaite.",
    testimonial_3_text: "Support professionnel, jantes de qualit√©, et r√©ponses rapides. Nous continuerons certainement √† travailler avec CHENHUA AUTO.",
    testimonial_4_text: "Chaque commande est livr√©e avec soin et pr√©cision. Leur √©quipe de support est toujours disponible, et cela cr√©e de la confiance.",

    quick_links: "Liens rapides",
    about_us: "√Ä propos de nous",
    contact: "Contact",
    follow_us: "Suivez-nous",
    privacy_policy: "Politique de confidentialit√©",
    terms_of_service: "Conditions d'utilisation",
    contact_us: "Contactez CHENHUA AUTO",
    full_name: "Nom complet",
    company_name: "Nom de l'entreprise",
    phone_number: "Num√©ro de t√©l√©phone",
    whatsapp: "WhatsApp",
    wechat: "WeChat",
    contact_email: "E-mail",
    toggle_theme: "Changer de th√®me"
  },

  ar: {
    home: "ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©",
    products: "ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™",
    about: "ŸÖŸÜ ŸÜÿ≠ŸÜ",
    contact: "ÿßÿ™ÿµŸÑ ÿ®ŸÜÿß",
    main_intro: "ÿ¨ŸÜŸàÿ∑ ÿßŸÑÿ¨ÿ±ÿßÿ±ÿßÿ™ ŸÑÿØŸäŸÜÿß",
    sub_intro: "ŸÇŸàŸäÿ©. ŸÖÿ™ŸäŸÜÿ©. ŸÖÿµŸÖŸÖÿ© ŸÑŸÑŸÖÿ≤ÿßÿ±ÿπ ŸÅŸä ŸÉŸÑ ŸÖŸÉÿßŸÜ.",

    // ‚úÖ Filter section translations
    filter_by_size: "ÿ™ÿµŸÅŸäÿ© ÿ≠ÿ≥ÿ® ÿßŸÑŸÖŸÇÿßÿ≥:",
    all_sizes: "ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖŸÇÿßÿ≥ÿßÿ™",
    filter_by_type: "ÿ™ÿµŸÅŸäÿ© ÿ≠ÿ≥ÿ® ÿßŸÑŸÜŸàÿπ:",
    all_types: "ÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ŸÜŸàÿßÿπ",
    disc: "ŸÇÿ±ÿµ",
    split: "ŸÖŸÇÿ≥ŸÖÿ©",
    solid: "ÿµŸÑÿ®ÿ©",

    action_1: "ŸáŸÑ ÿ™ÿ±ÿ∫ÿ® ŸÅŸä ÿßŸÑÿ™ÿπÿßŸàŸÜ ŸÖÿπ CHENHUA AUTO ÿü",
    action_2: "ŸÜÿ≠ŸÜ ÿ¨ÿßŸáÿ≤ŸàŸÜ ŸÑÿ™ŸÇÿØŸäŸÖ ÿ£ŸÅÿ∂ŸÑ ÿßŸÑÿ¨ŸÜŸàÿ∑ ŸàÿßŸÑÿØÿπŸÖ ŸÑÿßÿ≠ÿ™Ÿäÿßÿ¨ÿßÿ™ŸÉ. ŸÑŸÜŸÜŸÖŸà ŸÖÿπŸãÿß.",
    contact_sales: "ÿ™ŸàÿßÿµŸÑ ŸÖÿπ ŸÅÿ±ŸäŸÇ ÿßŸÑŸÖÿ®Ÿäÿπÿßÿ™ ŸÑÿØŸäŸÜÿß",

    testimonials: "ÿ¢ÿ±ÿßÿ° ÿπŸÖŸÑÿßÿ¶ŸÜÿß",
    testimonial_1_text: "ŸÖŸÜ ŸÖÿ™ÿßŸÜÿ© ÿßŸÑŸÖŸÜÿ™ÿ¨ ÿ•ŸÑŸâ ÿÆÿØŸÖÿ© ÿßŸÑÿπŸÖŸÑÿßÿ°ÿå ŸÉÿßŸÜÿ™ ÿßŸÑÿ™ÿ¨ÿ±ÿ®ÿ© ÿ±ÿßÿ¶ÿπÿ©. ŸÑŸÇÿØ ÿ£Ÿèÿπÿ¨ÿ®ŸÜÿß ÿ®ÿßŸÑÿ≥ÿ±ÿπÿ© ŸàÿßŸÑÿ™ŸàÿßÿµŸÑ!",
    testimonial_2_text: "ÿ≥ÿßÿπÿØÿ™ŸÜÿß ŸÉÿßÿ±Ÿä ŸàÿßŸÑŸÅÿ±ŸäŸÇ ŸÅŸä ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ŸÖÿß ŸÜÿ≠ÿ™ÿßÿ¨Ÿá ÿ®ÿßŸÑÿ∂ÿ®ÿ∑. ÿßŸÑÿ¨ŸÜŸàÿ∑ ŸÖÿ™ŸäŸÜÿ© ŸàÿßŸÑÿ™ŸàÿµŸäŸÑ ŸÉÿßŸÜ ÿØŸÇŸäŸÇŸãÿß.",
    testimonial_3_text: "ÿØÿπŸÖ ÿßÿ≠ÿ™ÿ±ÿßŸÅŸäÿå Ÿàÿ¨ŸàÿØÿ© ÿπÿßŸÑŸäÿ© ŸÑŸÑÿ¨ŸÜŸàÿ∑ÿå Ÿàÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿßÿ™ ÿ≥ÿ±Ÿäÿπÿ©. ÿ≥ŸÜÿ≥ÿ™ŸÖÿ± ŸÅŸä ÿßŸÑÿ™ÿπÿßŸÖŸÑ ŸÖÿπ CHENHUA AUTO.",
    testimonial_4_text: "Ÿäÿ™ŸÖ ÿ™ÿ≥ŸÑŸäŸÖ ŸÉŸÑ ÿ∑ŸÑÿ® ÿ®ÿπŸÜÿßŸäÿ© ŸàÿØŸÇÿ©. ŸÅÿ±ŸäŸÇ ÿßŸÑÿØÿπŸÖ ŸÖÿ™ÿßÿ≠ ÿØÿßÿ¶ŸÖŸãÿßÿå ŸàŸáÿ∞ÿß Ÿäÿπÿ≤ÿ≤ ÿßŸÑÿ´ŸÇÿ©.",

    quick_links: "ÿ±Ÿàÿßÿ®ÿ∑ ÿ≥ÿ±Ÿäÿπÿ©",
    about_us: "ŸÖŸÜ ŸÜÿ≠ŸÜ",
    contact: "ÿßÿ™ÿµŸÑ ÿ®ŸÜÿß",
    follow_us: "ÿ™ÿßÿ®ÿπŸÜÿß",
    privacy_policy: "ÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿÆÿµŸàÿµŸäÿ©",
    terms_of_service: "ÿ¥ÿ±Ÿàÿ∑ ÿßŸÑÿÆÿØŸÖÿ©",
    contact_us: "ÿ™ŸàÿßÿµŸÑ ŸÖÿπ CHENHUA AUTO",
    full_name: "ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑŸÉÿßŸÖŸÑ",
    company_name: "ÿßÿ≥ŸÖ ÿßŸÑÿ¥ÿ±ŸÉÿ©",
    phone_number: "ÿ±ŸÇŸÖ ÿßŸÑŸáÿßÿ™ŸÅ",
    whatsapp: "Ÿàÿßÿ™ÿ≥ÿßÿ®",
    wechat: "ŸàŸä ÿ¥ÿßÿ™",
    contact_email: "ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä",
    toggle_theme: "ÿ™ÿ®ÿØŸäŸÑ ÿßŸÑŸàÿ∂ÿπ"
  },

  zh: {
    home: "È¶ñÈ°µ",
    products: "‰∫ßÂìÅ",
    about: "ÂÖ≥‰∫éÊàë‰ª¨",
    contact: "ËÅîÁ≥ªÊàë‰ª¨",
    main_intro: "Êàë‰ª¨ÁöÑÊãñÊãâÊú∫ËΩÆËæã",
    sub_intro: "ÂùöÂõ∫„ÄÅËÄêÁî®ÔºåÈÄÇÁî®‰∫éÂêÑÂú∞ÂÜúÂú∫„ÄÇ",

    // ‚úÖ Filter section translations
    filter_by_size: "ÊåâÂ∞∫ÂØ∏Á≠õÈÄâÔºö",
    all_sizes: "ÊâÄÊúâÂ∞∫ÂØ∏",
    filter_by_type: "ÊåâÁ±ªÂûãÁ≠õÈÄâÔºö",
    all_types: "ÊâÄÊúâÁ±ªÂûã",
    disc: "ÂÆûÂøÉÁõò",
    split: "ÂàÜ‰ΩìÂºè",
    solid: "ÂÆûÂøÉ",

    action_1: "ÊÉ≥‰∏é CHENHUA AUTO  ÂºÄÂ±ïÂêà‰ΩúÔºü",
    action_2: "Êàë‰ª¨ÈöèÊó∂‰∏∫ÊÇ®Êèê‰æõ‰ºòË¥®ËΩÆËæãÂíåÊîØÊåÅÊúçÂä°„ÄÇËÆ©Êàë‰ª¨‰∏ÄËµ∑ÊàêÈïø„ÄÇ",
    contact_sales: "ËÅîÁ≥ªÈîÄÂîÆÂõ¢Èòü",

    testimonials: "ÂÆ¢Êà∑ËØÑ‰ª∑",
    testimonial_1_text: "‰ªé‰∫ßÂìÅÁöÑËÄêÁî®ÊÄßÂà∞ÂÆ¢Êà∑ÊúçÂä°Ôºå‰ΩìÈ™åÈùûÂ∏∏Ê£í„ÄÇÊàë‰ª¨ÂØπÈÄüÂ∫¶ÂíåÊ≤üÈÄöÂç∞Ë±°Ê∑±ÂàªÔºÅ",
    testimonial_2_text: "Kari ÂíåÂõ¢ÈòüÂ∏ÆÂä©Êàë‰ª¨ÊâæÂà∞‰∫ÜÊ≠£ÂêàÈÄÇÁöÑ‰∫ßÂìÅ„ÄÇËΩÆËæãÂæàÁªìÂÆûÔºå‰∫§Ë¥ß‰πüÂæàÂèäÊó∂„ÄÇ",
    testimonial_3_text: "‰∏ì‰∏öÊîØÊåÅÔºåÈ´òË¥®ÈáèËΩÆËæãÔºåÂìçÂ∫îËøÖÈÄü„ÄÇÊàë‰ª¨ËÇØÂÆö‰ºöÁªßÁª≠‰∏é CHENHUA AUTO Âêà‰Ωú„ÄÇ",
    testimonial_4_text: "ÊØè‰∏ÄÁ¨îËÆ¢ÂçïÈÉΩË¢´ÁªÜÂøÉÂ§ÑÁêÜ„ÄÇ‰ªñ‰ª¨ÁöÑÊîØÊåÅÂõ¢ÈòüÊÄªÊòØÂú®Á∫øÔºåËøôÂ¢ûÂº∫‰∫Ü‰ø°‰ªªÊÑü„ÄÇ",

    quick_links: "Âø´ÈÄüÈìæÊé•",
    about_us: "ÂÖ≥‰∫éÊàë‰ª¨",
    contact: "ËÅîÁ≥ªÊàë‰ª¨",
    follow_us: "ÂÖ≥Ê≥®Êàë‰ª¨",
    privacy_policy: "ÈöêÁßÅÊîøÁ≠ñ",
    terms_of_service: "ÊúçÂä°Êù°Ê¨æ",
    contact_us: "ËÅîÁ≥ª CHENHUA AUTO",
    full_name: "ÂÖ®Âêç",
    company_name: "ÂÖ¨Âè∏ÂêçÁß∞",
    phone_number: "ÁîµËØùÂè∑Á†Å",
    whatsapp: "WhatsApp",
    wechat: "ÂæÆ‰ø°",
    contact_email: "ÁîµÂ≠êÈÇÆ‰ª∂",
    toggle_theme: "ÂàáÊç¢‰∏ªÈ¢ò"
  }



};




function changeLanguage(lang) {
  // Save selected language to localStorage (optional)
  localStorage.setItem('selectedLanguage', lang);

  // Find all elements with data-i18n attribute
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    if (translations[lang] && translations[lang][key]) {
      el.textContent = translations[lang][key];
    }
  });

  // Also update language select dropdowns (to keep them in sync)
  document.querySelectorAll('.language-select, .mobile-language-select').forEach(select => {
    select.value = lang;
  });
}

// On page load, set language from saved preference or default to English
document.addEventListener('DOMContentLoaded', () => {
  const savedLang = localStorage.getItem('selectedLanguage') || 'en';
  changeLanguage(savedLang);
});